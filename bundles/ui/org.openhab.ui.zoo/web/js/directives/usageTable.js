// Generated by CoffeeScript 1.9.2
'use strict';
angular.module('ZooLib.directives.usageTable', []).directive('usageTable', function(itemService, influxDb) {
  return {
    restrict: 'E',
    replace: true,
    templateUrl: 'partials/directives/usageTable.html',
    link: function(scope, elem, attr) {
      var influx;
      itemService.getByName({
        itemName: 'gConsumptions'
      }, function(data) {
        return {
          globalConsumption: data.state,
          rooms: data.members
        };
      });
      return influx = influxDb.query({
        query: 'select difference(value) as diff from /^consum/i group by time(1d)'
      }, function(data) {
        return console.log('Influx response', influx);
      });
    }
  };
});
