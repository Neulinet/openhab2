// Generated by CoffeeScript 1.9.2
'use strict';
angular.module('ZooLib.directives.navState', ['ui.router']).directive('navState', function($state) {
  var clearWatch, link;
  clearWatch = null;
  link = function(scope) {
    if (scope.icon == null) {
      scope.icon = scope.name;
    }
    if (scope.state == null) {
      scope.state = scope.name;
    }
    clearWatch = scope.$watch('state', function(val) {
      if (val) {
        scope.linkToState = $state.href(val);
      }
      return clearWatch();
    });
    return scope.$on('$stateChangeSuccess', function() {
      return scope.isActive = $state.$current.name.indexOf(scope.name) === 0;
    });
  };
  return {
    restrict: 'E',
    replace: true,
    template: '<li ng-class="{active:isActive}"><a href="{{linkToState}}"><i class="nav-icon i-{{icon}}"></i>{{title}}</a></li>',
    scope: {
      name: '@',
      title: '@',
      icon: '@',
      state: '@'
    },
    link: link
  };
});
